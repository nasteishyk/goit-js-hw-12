{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '52318112-aedb8ccc797c66be623deef69';\n\nexport async function getImagesByQuery(query, currentPage) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: 15\n  };\n\n  try {\n    const res = await axios.get(BASE_URL, { params })\n    return res.data\n  } catch(error) {\n    throw error\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector(\".gallery\")\nconst loader = document.querySelector(\".loader\")\nexport const btnLoadMore = document.querySelector(\".load-more-btn\")\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n  captions: true,\n  captionsData: \"alt\",\n  captionDelay: 250\n})\n\nexport function createGallery(images) {\n  gallery.innerHTML += images.map(({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => `\n          <li class=\"gallery-item\">\n            <a href=\"${largeImageURL}\">\n              <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            </a>\n            <div class=\"info\">\n              <p><b>Likes:</b> ${likes}</p>\n              <p><b>Views:</b> ${views}</p>\n              <p><b>Comments:</b> ${comments}</p>\n              <p><b>Downloads:</b> ${downloads}</p>\n            </div>\n          </li>\n        `\n    )\n    .join(\"\")\n\n    lightbox.refresh()\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = \"\"\n}\n\nexport function showLoader() {\n    loader.classList.remove(\"hidden\")\n}\n\nexport function hideLoader() {\n    loader.classList.add(\"hidden\")\n}\n\nexport function showLoadMoreButton() {\n  btnLoadMore.classList.remove(\"hidden\")\n}\n\nexport function hideLoadMoreButton() {\n  btnLoadMore.classList.add(\"hidden\")\n}\n\nexport function smoothScroll() {\n  const { height } = gallery\n    .firstElementChild\n    .getBoundingClientRect();\n\n  window.scrollBy({\n    top: height * 2,\n    behavior: \"smooth\",\n  });\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  smoothScroll\n} from '/js/render-functions';\nimport { btnLoadMore } from './js/render-functions'\n\nconst form = document.querySelector('.form');\n\nlet page;\nlet searchElem = '';\n\nform.addEventListener('submit', searchImg);\nasync function searchImg(event) {\n  event.preventDefault();\n\n  page = 1\n\n  searchElem = form.elements['search-text'].value.trim();\n\n  if (searchElem === '') {\n    iziToast.show({\n      message: 'Fill in the search bar!',\n      color: 'red',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  clearGallery();\n\n  showLoader();\n\n  try {\n    const res = await getImagesByQuery(searchElem, page);\n    if (res.hits.length === 0) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        color: 'red',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    createGallery(res.hits);\n\n    page++\n\n    if(page === (Math.ceil(res.totalHits / 15))) {\n      iziToast.show({\n        message:\n          \"We're sorry, but you've reached the end of search results.\",\n        color: 'blue',\n        position: 'topRight',\n      });\n      return\n    } else {\n      showLoadMoreButton()\n    }\n  } catch (error) {\n    iziToast.show({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      color: 'red',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n    form.reset();\n  }\n}\n\nbtnLoadMore.addEventListener('click', loadMore)\nasync function loadMore() {\n  hideLoadMoreButton()\n  showLoader()\n  try {\n    const res = await getImagesByQuery(searchElem, page);\n    createGallery(res.hits);\n    smoothScroll()\n\n    page++\n\n    if(page === (Math.ceil(res.totalHits / 15))) {\n      iziToast.show({\n        message:\n          \"We're sorry, but you've reached the end of search results.\",\n        color: 'blue',\n        position: 'topRight',\n      });\n      return\n    } else {\n      showLoadMoreButton()\n    }\n  } catch (error) {\n    iziToast.show({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      color: 'red',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\n"],"names":["BASE_URL","API_KEY","getImagesByQuery","query","currentPage","params","axios","error","gallery","loader","btnLoadMore","lightbox","SimpleLightbox","createGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","smoothScroll","height","form","page","searchElem","searchImg","event","iziToast","res","loadMore"],"mappings":"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"}