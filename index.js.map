{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '52318112-aedb8ccc797c66be623deef69';\nexport const perPage = 15\n\nexport async function getImagesByQuery(query, currentPage) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: perPage\n  };\n\n  try {\n    const res = await axios.get(BASE_URL, { params })\n    return res.data\n  } catch(error) {\n    throw error\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const gallery = document.querySelector(\".gallery\")\nconst loader = document.querySelector(\".loader\")\nexport const btnLoadMore = document.querySelector(\".load-more-btn\")\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n  captions: true,\n  captionsData: \"alt\",\n  captionDelay: 250\n})\n\nexport function createGallery(images) {\n  const markup = images.map(({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => `\n          <li class=\"gallery-item\">\n            <a href=\"${largeImageURL}\">\n              <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            </a>\n            <div class=\"info\">\n              <p><b>Likes:</b> ${likes}</p>\n              <p><b>Views:</b> ${views}</p>\n              <p><b>Comments:</b> ${comments}</p>\n              <p><b>Downloads:</b> ${downloads}</p>\n            </div>\n          </li>\n        `\n    )\n    .join(\"\")\n\n    gallery.insertAdjacentHTML('beforeend', markup)\n\n    lightbox.refresh()\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = \"\"\n}\n\nexport function showLoader() {\n    loader.classList.remove(\"hidden\")\n}\n\nexport function hideLoader() {\n    loader.classList.add(\"hidden\")\n}\n\nexport function showLoadMoreButton() {\n  btnLoadMore.classList.remove(\"hidden\")\n}\n\nexport function hideLoadMoreButton() {\n  btnLoadMore.classList.add(\"hidden\")\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { perPage, getImagesByQuery } from './js/pixabay-api';\nimport {\n  gallery,\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  btnLoadMore\n} from './js/render-functions';\n\nconst form = document.querySelector('.form');\n\nlet page;\nlet searchElem = '';\n\nhideLoadMoreButton()\n\nform.addEventListener('submit', searchImg);\nasync function searchImg(event) {\n  event.preventDefault();\n  hideLoadMoreButton()\n\n  page = 1\n\n  searchElem = form.elements['search-text'].value.trim();\n\n  if (searchElem === '') {\n    iziToast.show({\n      message: 'Fill in the search bar!',\n      color: 'red',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  clearGallery();\n\n  try {\n    showLoader();\n    const res = await getImagesByQuery(searchElem, page);\n    if (res.hits.length === 0) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        color: 'red',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    createGallery(res.hits);\n    \n    form.reset();\n\n    if(page === (Math.ceil(res.totalHits / perPage))) {\n      iziToast.show({\n        message:\n          \"We're sorry, but you've reached the end of search results.\",\n        color: 'blue',\n        position: 'topRight',\n      });\n      return\n    } else {\n      page++\n      showLoadMoreButton()\n    }\n  } catch (error) {\n    iziToast.show({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      color: 'red',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nbtnLoadMore.addEventListener('click', loadMore)\nasync function loadMore() {\n  hideLoadMoreButton()\n\n  try {\n    showLoader()\n    const res = await getImagesByQuery(searchElem, page);\n    createGallery(res.hits);\n    smoothScroll()\n\n    page++\n\n    if(page === (Math.ceil(res.totalHits / 15))) {\n      iziToast.show({\n        message:\n          \"We're sorry, but you've reached the end of search results.\",\n        color: 'blue',\n        position: 'topRight',\n      });\n      return\n    } else {\n      showLoadMoreButton()\n    }\n  } catch (error) {\n    iziToast.show({\n      message:\n        'Sorry, there are some problems...',\n      color: 'red',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction smoothScroll() {\n  const { height } = gallery\n    .firstElementChild\n    .getBoundingClientRect();\n\n  window.scrollBy({\n    top: height * 2,\n    behavior: \"smooth\",\n  });\n}"],"names":["BASE_URL","API_KEY","perPage","getImagesByQuery","query","currentPage","params","axios","error","gallery","loader","btnLoadMore","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","page","searchElem","searchImg","event","iziToast","res","loadMore","smoothScroll","height"],"mappings":"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"}